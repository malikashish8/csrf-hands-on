<!DOCTYPE html>

<body>
  <h2>
    Cross Origin XMLHttpRequest with custom headers
  </h2>
  <ul>
    <li>Since this request has custom headers, a pre-flight <i>OPTIONS</i> request is sent</li>
    <li>As the <i>OPTIONS</i> request does not get a valid response the actual request is not sent</li>
  </ul>

  <pre id="status">Here here!</pre>
  <script>
    document.getElementById("status").innerText = "testing...";

    // send cross origin request to localhost:8000
    var xhr = new XMLHttpRequest();
    xhr.open("POST", "https://localhost:8000/api", true);
    xhr.setRequestHeader("X-PINGOTHER", "pingpong");
    xhr.onload = function () {
      document.getElementById("status").innerText = xhr.responseText;
    };
    xhr.onerror = function () {
      document.getElementById("status").innerText = "XHR Error";
    };
    xhr.send();
  </script>
</body>